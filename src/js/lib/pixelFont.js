// https://github.com/PaulBGD/PixelFont
var varters = varters = {
	'A': [
		[, 1],
		[1, , 1],
		[1, , 1],
		[1, 1, 1],
		[1, , 1]
	],
	'B': [
		[1, 1],
		[1, , 1],
		[1, 1, 1],
		[1, , 1],
		[1, 1]
	],
	'C': [
		[1, 1, 1],
		[1],
		[1],
		[1],
		[1, 1, 1]
	],
	'D': [
		[1, 1],
		[1, , 1],
		[1, , 1],
		[1, , 1],
		[1, 1]
	],
	'E': [
		[1, 1, 1],
		[1],
		[1, 1, 1],
		[1],
		[1, 1, 1]
	],
	'F': [
		[1, 1, 1],
		[1],
		[1, 1],
		[1],
		[1]
	],
	'G': [
		[, 1, 1],
		[1],
		[1, , 1, 1],
		[1, , , 1],
		[, 1, 1]
	],
	'H': [
		[1, , 1],
		[1, , 1],
		[1, 1, 1],
		[1, , 1],
		[1, , 1]
	],
	'I': [
		[1, 1, 1],
		[, 1],
		[, 1],
		[, 1],
		[1, 1, 1]
	],
	'J': [
		[1, 1, 1],
		[, , 1],
		[, , 1],
		[1, , 1],
		[1, 1, 1]
	],
	'K': [
		[1, , , 1],
		[1, , 1],
		[1, 1],
		[1, , 1],
		[1, , , 1]
	],
	'L': [
		[1],
		[1],
		[1],
		[1],
		[1, 1, 1]
	],
	'M': [
		[1, 1, 1, 1, 1],
		[1, , 1, , 1],
		[1, , 1, , 1],
		[1, , , , 1],
		[1, , , , 1]
	],
	'N': [
		[1, , , 1],
		[1, 1, , 1],
		[1, , 1, 1],
		[1, , , 1],
		[1, , , 1]
	],
	'O': [
		[1, 1, 1],
		[1, , 1],
		[1, , 1],
		[1, , 1],
		[1, 1, 1]
	],
	'P': [
		[1, 1, 1],
		[1, , 1],
		[1, 1, 1],
		[1],
		[1]
	],
	'Q': [
		[0, 1, 1],
		[1, , , 1],
		[1, , , 1],
		[1, , 1, 1],
		[1, 1, 1, 1]
	],
	'R': [
		[1, 1],
		[1, , 1],
		[1, , 1],
		[1, 1],
		[1, , 1]
	],
	'S': [
		[1, 1, 1],
		[1],
		[1, 1, 1],
		[, , 1],
		[1, 1, 1]
	],
	'T': [
		[1, 1, 1],
		[, 1],
		[, 1],
		[, 1],
		[, 1]
	],
	'U': [
		[1, , 1],
		[1, , 1],
		[1, , 1],
		[1, , 1],
		[1, 1, 1]
	],
	'V': [
		[1, , , , 1],
		[1, , , , 1],
		[, 1, , 1],
		[, 1, , 1],
		[, , 1]
	],
	'W': [
		[1, , , , 1],
		[1, , , , 1],
		[1, , , , 1],
		[1, , 1, , 1],
		[1, 1, 1, 1, 1]
	],
	'X': [
		[1, , , , 1],
		[, 1, , 1],
		[, , 1],
		[, 1, , 1],
		[1, , , , 1]
	],
	'Y': [
		[1, , 1],
		[1, , 1],
		[, 1],
		[, 1],
		[, 1]
	],
	'Z': [
		[1, 1, 1, 1, 1],
		[, , , 1],
		[, , 1],
		[, 1],
		[1, 1, 1, 1, 1]
	],
	'0': [
		[1, 1, 1],
		[1, , 1],
		[1, , 1],
		[1, , 1],
		[1, 1, 1]
	],
	'1': [
		[, 1],
		[, 1],
		[, 1],
		[, 1],
		[, 1]
	],
	'2': [
		[1,1,1],
		[0,0,1],
		[1,1,1],
		[1,0,0],
		[1,1,1]
	],
	'3':[
		[1,1,1],
		[0,0,1],
		[1,1,1],
		[0,0,1],
		[1,1,1]
	],
	'4':[
		[1,0,1],
		[1,0,1],
		[1,1,1],
		[0,0,1],
		[0,0,1]
	],
	'5':[
		[1,1,1],
		[1,0,0],
		[1,1,1],
		[0,0,1],
		[1,1,1]
	],
	'6':[
		[1,1,1],
		[1,0,0],
		[1,1,1],
		[1,0,1],
		[1,1,1]
	],
	'7':[
		[1,1,1],
		[0,0,1],
		[0,0,1],
		[0,0,1],
		[0,0,1]
	],
	'8':[
		[1,1,1],
		[1,0,1],
		[1,1,1],
		[1,0,1],
		[1,1,1]
	],
	'9':[
		[1,1,1],
		[1,0,1],
		[1,1,1],
		[0,0,1],
		[1,1,1]
	],
	' ': [
		[, ,],
		[, ,],
		[, ,],
		[, ,],
		[, ,]
	],
	'@': [
		[, 1, 1],
		[1, , , 1],
		[1, , 1, 1],
		[1],
		[, 1, 1]
	]
};

// simplified code of
// https://github.com/MattiaFortunati/a_day_in_the_life/blob/master/src/js/text.js
var TCVS, TCTX

//init
function createTextCanvas() {
	TCVS = textCanvas
    TCTX = TCVS.getContext("2d");
    document.body.appendChild(TCVS);
}

//draw text
//canvas is not cleared, and fillstyle not set!
function drawText(string, size, fillStyle, pos, rAlign = false) {
    var context = TCTX
    var size = 5 * size
    var TX = pos.x
    var TY = pos.y

	var needed = [];
    if (string) {
		context.fillStyle = fillStyle;
        string = string.toUpperCase();
        for (var i = 0; i < string.length; i++) {
            var varter = varters[string.charAt(i)];
            if (varter) {
                needed.push(varter);
            }
        }

        if (rAlign == false) {
            var currX = 0;
            for (i = 0; i < needed.length; i++) {
                varter = needed[i];
                var currY = 0;
                var addX = 0;
                for (var y = 0; y < varter.length; y++) {
                    var row = varter[y];
                    for (var x = 0; x < row.length; x++) {
                        if (row[x]) {
                            context.fillRect(currX + x * size + TX, currY + TY, size, size);
                        }
                    }
                    addX = Math.max(addX, row.length * size);
                    currY += size;
                }
                currX += size + addX;
            }
        } else {
            var currX = 0;
            for (i = 0; i < needed.length; i++) {
                varter = needed[needed.length-i-1];
                var currY = 0;
                var addX = 0;
                for (var y = 0; y < varter.length; y++) {
                    var row = varter[y];
                    for (var x = 0; x < row.length; x++) {
                        if (row[x]) {
                            context.fillRect(currX + x * size + TX, currY + TY, size, size);
                        }
                    }
                    addX = Math.max(addX, row.length * size);
                    currY += size;
                }
                currX -= size + addX;
            }
        }
    }
}